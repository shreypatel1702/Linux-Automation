#!/bin/bash

# Gather System Information
hostname=$(hostname)
os=$(source /etc/os-release && echo $name)
uptime=$(uptime -p)

# Gather Hardware Information
cpu=$(lshw -class processor | grep "product" | head -1)
ram=$(free -h | grep Mem | awk '{print $2}')
disks=$(lsblk -d | awk '{print $1, $4}')
video=$(lshw -class display | grep "product")

# Gather Network Information
ip=$(hostname -I | awk '{print $1}')
gateway=$(ip r | grep default | awk '{print $3}')
dns=$(systemd-resolve --status | grep 'DNS Servers' | head -1 | awk '{print $3}')
fqdn=$(hostname -f)

# Gather System Status
users=$(who | awk '{print $1}' | sort | uniq)
disk_space=$(df -h)
process_count=$(ps -e | wc -l)
load_average=$(uptime | awk -F'[a-z]:' '{ print $2}')
memory_allocation=$(free -h)
listening_ports=$(ss -tulwn | grep LISTEN)
ufw_rules=$(sudo ufw status verbose)

# Print Report

echo "
---------------------------------------------------------------------------------------------------------------------------------------------------------
System Report generated by $users, $(date)

System Information
------------------
Hostname: $hostname
OS: $os
Uptime: $uptime

Hardware Information
--------------------------------------------------------------------------------------------------------------------------------------
$cpu
Ram: $ram
Disk(s): $disks
Video: $video

Network Information
--------------------------------------------------------------------------------------------------------------------------------
FQDN: $fqdn
Host Address: $ip
Gateway IP: $gateway
DNS Server: $dns

System Status
------------------------------------------------------------------------------------------------------------
Users Logged In: $users
Disk Space: 
$disk_space
Process Count: $process_count
Load Averages: $load_average
Memory Allocation: 
$memory_allocation
Listening Network Ports: 
$listening_ports
UFW Rules: 
$UFW_RULES
---------------------------------------------------------------------------------------------------------------
#<pre><font color="#26A269"><b>shrey@Generic-VM</b></font>:<font color="#12488B"><b>~/Linux-Automation-</b></font>$ bash Assignment-1-System-Report.sh
#WARNING: you should run this program as super-user.
#WARNING: output may be incomplete or inaccurate, you should run this program as super-user.
#WARNING: you should run this program as super-user.
#WARNING: output may be incomplete or inaccurate, you should run this program as super-user.
#Assignment-1-System-Report.sh: line 17: systemd-resolve: command not found
#</pre>
"
